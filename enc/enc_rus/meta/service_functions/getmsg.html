<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>GetMsg</title>
<meta http-equiv="Content-Type" Content="text/html; charset=Windows-1251">
<link rel="stylesheet" type="text/css" href="../../styles/styles.css">
<script language="javascript" src='../links.js' type="text/javascript"></script>

<!-- History of modification:
 Date: Oct 30 1999
   Author: Valentin Skirdin
   E-mail: vskirdin@mail.ru
 Jan 12 2000
   Valentin Skirdin <vskirdin@mail.ru>
   корректировка
-->
</head>

<body>

<h1>GetMsg</h1>
<div class=navbar>
<a href="../index.html">главная</a> |
<a href="index.html">сервисные функции</a><br>
</div>

<div class=shortdescr>
  Функция <dfn>GetMsg</dfn> возвращает строку сообщения из
  <a href="../language/language_files.html">языкового файла</a>.
  Настоятельно рекомендуется использовать эту функцию вместо
  предопределенного текста в ваших программах, поскольку это
  позволит локализовать ваш плагин
  и переключать языки в FAR Manager и плагине одновременно.
</div>

<pre class=syntax>
const char* WINAPI GetMsg(
  int PluginNumber,
  int MsgId
);
</pre>

<h3>Параметры</h3>
<div class=descr>
    <div class=dfn>PluginNumber</div>
    <div class=dfndescr>Номер плагина. Этот номер вы
      получаете в функции <a href="../exported_functions/setstartupinfo.html">SetStartupInfo</a>.</div>
    <div class=dfn>MsgId</div>
    <div class=dfndescr>Номер строки сообщения в файле сообщений.<br>
    </div>
</div>

<h3>Возвращаемое значение</h3>
<div class=descr>
  Эта функция возвращает адрес запрашиваемой
  строки сообщения.
</div>

<h3>Примечание</h3>
<div class=descr>
  Все <code>*.lng</code> файлы в каталоге с плагином являются языковыми
  файлами. FAR выбирает необходимый <code>*.lng</code> файл в соответствии
  с установленным языком.
  При первом использования функции <dfn>GetMsg</dfn> все сообщения загружаются
  в память, поэтому при последующих вызовах этой функции доступ к сообщениям
  производится быстрее и вам не надо сохранять полученные строки
  сообщений в промежуточные буферы.
</div>

<h3>Пример</h3>
<div class=descr>
  Во всех <a href="../examples.html">примерах</a>, как вы могли
  заметить, используется следующая функция:

<div class=dfn>C/C++:</div>
<pre class=code>const char *GetMsg(int MsgId)
{
  return(Info.GetMsg(Info.ModuleNumber,MsgId));
}
</pre>

<div class=dfn>Delphi:</div>
<pre class=code>function GetMsg(MsgId: TMessageStrings): PChar;
begin
  result:= <dfn>Info</dfn>.GetMsg(<dfn>Info</dfn>.ModuleNumber,integer(MsgId));
end;
</pre>

  Причем, <dfn>Info</dfn> определяется как глобальная переменная:

<pre class=code>struct PluginStartupInfo <dfn>Info</dfn>;
</pre>

  ...а инициализируется она в функции <a href="../exported_functions/setstartupinfo.html">SetStartupInfo</a>:

<pre class=code>void WINAPI _export SetStartupInfo(struct PluginStartupInfo *Info)
{
  ...
  ::Info=*Info;
  ...
}
</pre>

</div>

<div class=see>Смотрите также:</div><div class=seecont>
<a href="../language/index.html">Языки и файлы помощи</a> |
<a href="../addons/locmsg.html">LocMsg</a><br>
"<a href="../articles/localization.html">Локализация плагинов второго уровня</a>"
</div>

</body>
</html>
