<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>EditorInfo</title>
<meta http-equiv="Content-Type" Content="text/html; charset=Windows-1251">
<link rel="stylesheet" type="text/css" href="../../styles/styles.css">
<script language="javascript" src='../links.js' type="text/javascript"></script>
</head>

<body>

<h1>EditorInfo</h1>
<div class=navbar>
<a href="../index.html">главная</a> |
<a  href="index.html">структуры</a><br>
</div>

<div class=shortdescr>
Структура <dfn>EditorInfo</dfn> используется в функции <a href="../service_functions/editorcontrol.html">EditorControl</a>
для получения информации о текущем состоянии редактора FAR'а.
</div>

<pre class=syntax>
struct EditorInfo
{
  int EditorID;
  const char *FileName;
  int WindowSizeX;
  int WindowSizeY;
  int TotalLines;
  int CurLine;
  int CurPos;
  int CurTabPos;
  int TopScreenLine;
  int LeftPos;
  int Overtype;
  int BlockType;
  int BlockStartLine;
  int AnsiMode;
  int TableNum;
  DWORD Options;
  int TabSize;
  int BookMarkCount;
  DWORD CurState;
  DWORD Reserved[6];
};
</pre>
<h3>Элементы</h3>
<div class=descr>

    <div class=dfn>EditorID</div>
    <div class=dfndescr>Идентификатор экземпляра редактора. Каждый экземпляр редактора имеет уникальный идентификатор, который не повторяется в текущей сессии FAR'а.</div>
    <div class=dfn>FileName</div>
    <div class=dfndescr>Имя редактируемого файла - полный путь (<em>замечания относительно этого поля читайте для FAR версии ниже 1.65 <a href="../articles/ed_fullpath.html">здесь</a></em>).</div>
    <div class=dfn>WindowSizeX, WindowSizeY</div>
    <div class=dfndescr>Ширина и высота окна редактора.</div>
    <div class=dfn>TotalLines</div>
    <div class=dfndescr>Количество строк в редактируемом тексте.</div>
    <div class=dfn>CurLine</div>
    <div class=dfndescr>Номер текущей строки.</div>
    <div class=dfn>CurPos</div>
    <div class=dfndescr>Позиция курсора в текущей строке.</div>
    <div class=dfn>CurTabPos</div>
    <div class=dfndescr>Экранная позиция курсора в текущей строке. Если строка не содержит символов табуляции, <i>CurTabPos</i> эквивалентна <i>CurPos</i>.</div>
    <div class=dfn>TopScreenLine</div>
    <div class=dfndescr>Номер строки вверху экрана.</div>
    <div class=dfn>LeftPos</div>
    <div class=dfndescr>Позиция левой границы окна редактора в редактируемом тексте.</div>
    <div class=dfn>Overtype</div>
    <div class=dfndescr>0 - режим вставки, 1 - замены.</div>
    <div class=dfn>BlockType</div>
    <div class=dfndescr>Тип выбранного блока. Одно из следующих значений (перечисление <a name="EDITOR_BLOCK_TYPES">EDITOR_BLOCK_TYPES</a>):
        <table class="cont">
        <tr class="cont"><th class="cont" width="40%">Тип блока</th><th class="cont" width="60%">Описание</th></tr>
        <tr class="cont"><td class="cont" width="40%"><a name="BTYPE_NONE">BTYPE_NONE</a></td>
        <td class="cont" width="60%">снять выделение с блока, </td></tr>
        <tr class="cont"><td class="cont" width="40%"><a name="BTYPE_STREAM">BTYPE_STREAM</a></td>
        <td class="cont" width="60%">выделить строковой блок</td></tr>
        <tr class="cont"><td class="cont" width="40%"><a name="BTYPE_COLUMN">BTYPE_COLUMN</a></td>
        <td class="cont" width="60%">выделить вертикальный блок.</td></tr>
        </table>
    </div>
    <div class=dfn>BlockStartLine</div>
    <div class=dfndescr>Номер первой строки блока.</div>
    <div class=dfn>AnsiMode</div>
    <div class=dfndescr>Состояние текстового режима ANSI. Всегда равно 0, кроме случая,
    когда не используются таблицы символов и текст в кодировке ANSI.</div>
    <div class=dfn>TableNum</div>
    <div class=dfndescr>Номер текущей используемой таблицы символов FAR'а или -1, если таковая
    не используется и текст в кодировке OEM (в этом случае см. AnsiMode). Если
    это поле не равно -1, вы можете передать его в функции
    <a href="../service_functions/chartable.html">CharTable</a> для получения информации о таблице.</div>

    <div class=dfn>Options</div>
    <div class=dfndescr>Описывает состояние настроек редактора.
      Может быть комбинацией следующих флагов (перечисление <a name="EDITOR_OPTIONS">EDITOR_OPTIONS</a>):
<table class="cont">
<tr class="cont"><th class="cont" width="40%">Флаг</th><th class="cont" width="60%">Описание</th></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="EOPT_EXPANDALLTABS">EOPT_EXPANDALLTABS</a></td>
        <td class="cont" width="60%">Включена опция &quot;Преобразовывать все символы табуляции в пробелы&quot;
          При открытии документа в редакторе все символы Tab заменить на соответствующее количество пробелов.<br>
          Этот параметр можно изменить используя команду
          <a href="../service_functions/editorcontrol.html#ECTL_SETPARAM">ECTL_SETPARAM</a>
          (<a href="editorsetparameter.html#ESPT_EXPANDTABS">ESPT_EXPANDTABS</a>).
         </td></tr>
        <tr class="cont"><td class="cont" width="40%"><a name="EOPT_EXPANDONLYNEWTABS">EOPT_EXPANDONLYNEWTABS</a></td>
        <td class="cont" width="60%">Включена опция &quot;Преобразовывать новые символы табуляции в пробелы&quot;
          При редактировании документа введенный символ Tab заменять на соответствующее количество пробелов.
          Остальные символы Tab не преобразовывать.<br>
          Этот параметр можно изменить используя команду
          <a href="../service_functions/editorcontrol.html#ECTL_SETPARAM">ECTL_SETPARAM</a>
          (<a href="editorsetparameter.html#ESPT_EXPANDTABS">ESPT_EXPANDTABS</a>).
         </td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="EOPT_PERSISTENTBLOCKS">EOPT_PERSISTENTBLOCKS</a></td>
        <td class="cont" width="60%">Включена опция &quot;Постоянные блоки&quot;</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="EOPT_DELREMOVESBLOCKS">EOPT_DELREMOVESBLOCKS</a></td>
        <td class="cont" width="60%">Включена опция &quot;Del удаляет блоки&quot;</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="EOPT_AUTOINDENT">EOPT_AUTOINDENT</a></td>
        <td class="cont" width="60%">Включена опция &quot;Автоотступ&quot;.
          Этот параметр можно изменить используя команду
          <a href="../service_functions/editorcontrol.html#ECTL_SETPARAM">ECTL_SETPARAM</a>.
        </td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="EOPT_AUTODETECTTABLE">EOPT_AUTODETECTTABLE</a></td>
        <td class="cont" width="60%">Включена опция &quot;Автоопределение таблицы символов&quot;</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="EOPT_CURSORBEYONDEOL">EOPT_CURSORBEYONDEOL</a></td>
        <td class="cont" width="60%">Включена опция &quot;Курсор за пределами строки&quot;
          Этот параметр можно изменить используя команду
          <a href="../service_functions/editorcontrol.html#ECTL_SETPARAM">ECTL_SETPARAM</a>.
        </td></tr>
        <tr class="cont"><td class="cont" width="40%"><a name="EOPT_SAVEFILEPOSITION">EOPT_SAVEFILEPOSITION</a></td>
        <td class="cont" width="60%">Включена опция &quot;Сохранять позицию файла&quot;
          Этот параметр можно изменить используя команду
          <a href="../service_functions/editorcontrol.html#ECTL_SETPARAM">ECTL_SETPARAM</a>.
        </td></tr>
</table>
    </div>

    <div class=dfn>TabSize</div>
    <div class=dfndescr>Размер табуляции.
      Этот параметр можно изменить используя команду
      <a href="../service_functions/editorcontrol.html#ECTL_SETPARAM">ECTL_SETPARAM</a>.
     </div>
    <div class=dfn>BookMarkCount</div>
    <div class=dfndescr>Количество закладок в редакторе.
      Для получения информации о закладках используйте команду
      <a href="../service_functions/editorcontrol.html#ECTL_GETBOOKMARKS">ECTL_GETBOOKMARKS</a>.
     </div>
    <div class=dfn>CurState</div>
    <div class=dfndescr>Текущее состояние редактируемого текста. Может быть
     набором из следующих значений (перечисление <a name="EDITOR_CURRENTSTATE">EDITOR_CURRENTSTATE</a>):
<table class="cont">
<tr class="cont"><th class="cont" width="40%">Флаг</th><th class="cont" width="60%">Описание</th></tr>
       <tr class="cont"><td class="cont" width="40%"><a name="ECSTATE_MODIFIED">ECSTATE_MODIFIED</a></td>
       <td class="cont" width="60%">модифицирован</td></tr>
       <tr class="cont"><td class="cont" width="40%"><a name="ECSTATE_SAVED">ECSTATE_SAVED</a></td>
       <td class="cont" width="60%">сохранен</td></tr>
       <tr class="cont"><td class="cont" width="40%"><a name="ECSTATE_LOCKED">ECSTATE_LOCKED</a></td>
       <td class="cont" width="60%">заблокирован (Ctrl-L)</td></tr>
</table>
    </div>
    <div class=dfn>Reserved</div>
    <div class=dfndescr>Зарезервировано для будущего использования.</div>

</div>

<h3>Замечания</h3>
<div class=descr>
  Для точного определения текущего набора символов в редакторе можно
  воспользоваться следующей таблицей:
<pre class=code>                    EditorInfo.TableNum        EditorInfo.AnsiMode
DOS                          -1                         0
WIN                          -1                         1
Прочие                  Номер таблицы                   0
</pre>
  Для случая "Прочие" необходимо воспользоваться функцией
  <a href="../service_functions/chartable.html">CharTable</a>, с помощью которой можно
  узнать имя загруженной таблицы символов.
</div>

<div class=see>Смотрите также:</div><div class=seecont>
<a href="index.html">структуры</a> |
<a href="../delphi/teditorinfo.html">TEditorInfo</a>
</div>
</body>
</html>