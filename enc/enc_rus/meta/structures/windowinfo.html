<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>WindowInfo</title>
<meta http-equiv="Content-Type" Content="text/html; charset=Windows-1251">
<link rel="stylesheet" type="text/css" href="../../styles/styles.css">
<script language="javascript" src='../links.js' type="text/javascript"></script>
</head>
<body>

<h1>WindowInfo</h1>
<div class=navbar>
<a href="../index.html">главная</a> |
<a  href="index.html">структуры</a><br>
</div>

<div class=shortdescr>
Структура <dfn>WindowInfo</dfn> содержит информацию о конкретном окне
FAR Manager. Плагин может получить информацию, используя команду
<a href="../service_functions/advcontrol.html#ACTL_GETWINDOWINFO">ACTL_GETWINDOWINFO</a>.
</div>

<pre class=syntax>
struct WindowInfo{
  int  Pos;
  int  Type;
  int  Modified;
  int  Current;
  char TypeName[64];
  char Name[NM];
};
</pre>
<h3>Элементы</h3>
<div class=descr>
    <div class=dfn>Pos</div>
    <div class=dfndescr>Номер окна, о котором нужно узнать информацию.
      Нумерация идет с 0. <var>Pos</var> = -1 вернет информацию о текущем окне.
    </div>
    <div class=dfn>Type</div>
    <div class=dfndescr>Тип окна. Может иметь одно из следующих значений (перечисление <a name="WINDOWINFO_TYPE">WINDOWINFO_TYPE</a>):
    <table class="cont">
    <tr class="cont"><th class="cont" width="40%">Тип</th><th class="cont" width="60%">Описание</th></tr>
     <tr class="cont"><td class="cont" width="40%"><a name="WTYPE_PANELS">WTYPE_PANELS</a></td>
     <td class="cont" width="60%">Файловые панели.</td></tr>
     <tr class="cont"><td class="cont" width="40%"><a name="WTYPE_VIEWER">WTYPE_VIEWER</a></td>
      <td class="cont" width="60%">Окно встроенной программы просмотра.</td></tr>
     <tr class="cont"><td class="cont" width="40%"><a name="WTYPE_EDITOR">WTYPE_EDITOR</a></td>
      <td class="cont" width="60%">Окно встроенного редактора.</td></tr>
     <tr class="cont"><td class="cont" width="40%"><a name="WTYPE_DIALOG">WTYPE_DIALOG</a></td>
      <td class="cont" width="60%">Диалог.</td></tr>
     <tr class="cont"><td class="cont" width="40%"><a name="WTYPE_VMENU">WTYPE_VMENU</a></td>
      <td class="cont" width="60%">Меню.</td></tr>
     <tr class="cont"><td class="cont" width="40%"><a name="WTYPE_HELP">WTYPE_HELP</a></td>
      <td class="cont" width="60%">Окно подсказки.</td></tr>
    </table>
    </div>
    <div class=dfn>Modified</div>
    <div class=dfndescr>Признак модификации содержимого файла в окне.
      Может быть только у <dfn>WTYPE_EDITOR</dfn>.
    </div>
    <div class=dfn>Current</div>
    <div class=dfndescr>Является ли окно текущим.
    </div>
    <div class=dfn>TypeName</div>
    <div class=dfndescr>Имя типа окна (Panels,View,Edit,Help,VMenu),
     зависит от текущего языка.
    </div>
    <div class=dfn>Name</div>
    <div class=dfndescr>Имя окна. Для окон типа <dfn>WTYPE_VIEWER</dfn>,
       <dfn>WTYPE_EDITOR</dfn> содержит имя файла. Для панелей - имя текущего
       файлового объекта.
       Для окна помощи - ничего не содержит. Для диалогов и меню - заголовок.
    </div>
</div>

<h3>Пример</h3>
<div class=descr>
<pre class=code>
void GetFarWindowInfo()
{
  WindowInfo WInfo;
  int CountWindow;
  int I;
  FILE *Fp;

  if((Fp=fopen("window.log","a+t")) == NULL)
      return ;

  // запросили число окон
  CountWindow=Info.AdvControl(Info.ModuleNumber,ACTL_GETWINDOWCOUNT,NULL);
  fprintf(Fp,"WindowCount=%i\n",CountWindow);

  for ( I=0; I &lt; CountWindow; I++ )
  {
    // установили нужный номер
    WInfo.Pos=I;

    // запросили информаци об окне
    Info.AdvControl(Info.ModuleNumber,ACTL_GETWINDOWINFO,(void*)&amp;WInfo);

    // распечатали ее
    fprintf(Fp,"Window[%i], Type=%i (%s), File=[%s] Current=%i, Modified=%i\n",
               I,WInfo.Type,WInfo.TypeName,WInfo.Name,
               WInfo.Current,WInfo.Modified);
  }
  fclose(Fp);

  // установили окно номер 1 (то есть второе)
  Info.AdvControl(Info.ModuleNumber,ACTL_SETCURRENTWINDOW,(void*)1);
}
</pre>
</div>

<div class=see>Смотрите также:</div><div class=seecont>
<a href="index.html">структуры</a> |
<a href="../service_functions/advcontrol.html">AdvControl</a> |
<a href="../delphi/twindowinfo.html">TWindowInfo</a>
</div>

</body>
</html>
