<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Что нового в Programming FAR plugins - Encyclopedia for Developers?</title>
<meta http-equiv="Content-Type" Content="text/html; charset=Windows-1251">
<link rel="stylesheet" type="text/css" href="../styles/styles.css">
</head>
<body>

<h1>Что нового в Programming FAR plugins - Encyclopedia for Developers 1.75 SR2536?</h1>
<div class=navbar>
<a href="index.html">main</a>
</div>

<h3>3 марта 2009</h3>
<ul>
  <li>Macro: функция <a href="macro/macrocmd/functions.html#menu.select">Menu.Select</a> возвращает -1, если вызвана не из контента (не из меню).
    <br><br>
</ul>


<h3>2 марта 2009</h3>
<ul>
  <li>Macro: макросы можно назначать на клавиши мыши. В теле макропоследовательности доступны константы: MsX, MsY, MsButton, MsCtrlState.
    <br><br>
</ul>

<h3>24 февраля 2009</h3>
<ul>
  <li>Macro: новая функция <a href="macro/macrocmd/functions.html#atoi">atoi</a> - преобразует число из строкового представления в числовое.
    <br><br>
</ul>

<h3>23 января 2009</h3>
<ul>
  <li>Macro: дополнения и учтонения функционал у функции <a href="macro/macrocmd/functions.html#editor.sel">editor.sel</a> - работает в редакторе, в строках ввода в диалогах, в командной строке.
    <br><br>

  <li>Исправлены ошибки в <a href="service_functions/editorcontrol.html#ECTL_SELECT">ECTL_SELECT</a>:
     <ul>
     <li>отметка блока снимается всегда, даже если были неправильные параметры
     <li>отметка блока снимается всегда, даже если указанной строки (BlockStartLine) нет (BlockStartLine больше количества строк в редакторе)
     <li>если BlockHeight превышал количество строк в редакторе (например, пытаемся выделить блок, указывая последнюю строку,
         а BlockHeight, например, равный 10), то EditorControl возвращал FALSE, хотя блок успешно выделялся.
     <li>для BlockWidth, равным -1, получалось так, что для BTYPE_COLUMN "транзакция" пометки блока была неполной - это могло приводить к всевозможным проблемам с блоками.
     </ul>

    <br><br>
</ul>

<h3>16 января 2009</h3>
<ul>
  <li>Macro: функция <a href="macro/macrocmd/functions.html#waitkey">waitkey</a> имеет второй необязательный параметр - тип возвращаемого значения.
    <br><br>

  <li>Macro: новая функция <a href="macro/macrocmd/functions.html#editor.sel">editor.sel</a> позволяет манипулировать блоками в тексте.
    <br><br>

  <li>Macro: новая функция <a href="macro/macrocmd/functions.html#key">key</a> преобразует значение V в строковый эквивалент названия клавиши.
    <br><br>

  <li>Macro: Именованные клавиши (например, CtrlK) могут участвовать в любых выражениях; в этом случае они считаются как числа.
    <br><br>
</ul>


<h3>26 ноября 2008</h3>
<ul>
  <li>Добавлен новый цвет в палитру - <a href="defs/farcolors.html#COL_EDITORSCROLLBAR">COL_EDITORSCROLLBAR</a>.
    <br><br>
</ul>


<h3>6 ноября 2008</h3>
<ul>
  <li>Диалоги с флагом FDLG_SMALLDIALOG теперь отрисовываются с тенью. Чтобы запретить рисовать тень, укажите флаг FDLG_NODRAWSHADOW.
    <br><br>
</ul>

<h3>24 сентября 2008 г.</h3>
<ul>
  <li>Новые флаги функции <a href="fsf/mklink.html">MkLink</a>: FLINK_SYMLINKFILE, FLINK_SYMLINKDIR, позволяющие создавать символические ссылки Windows Vista/2008. Флаг FLINK_SYMLINK переименован в FLINK_JUNCTION.
    <br><br>
</ul>

<h3>11 августа 2008 г.</h3>
<ul>
  <li>В <a href="defs/farcolors.html">цветовую палитру</a> добавлен цвет пользовательского экрана.
    <br><br>
</ul>

<h3>06 августа 2008 г.</h3>
<ul>
  <li>Macro: Комбинация CtrlBreak прерывает выполнение макроса.
    <br><br>
  <li>Macro: Добавлена функция <a href="macro/macrocmd/functions.html#trim">S=trim(S[,Mode])</a> - удаляет все пробельные символы.
    <br><br>
  <li>Viewer API: Команда <a href="service_functions/viewercontrol.html#VCTL_GETINFO">VCTL_GETINFO</a> возвращала значение WindowSizeY на 1 меньше реального значения.
    <br><br>
</ul>



<h3>19 июня 2008 г.</h3>
<ul>
  <li>Macro: Теперь <a href="macro/macrocmd/states.html#Dlg.ItemType">Dlg.ItemType</a> "отдает" все то же самое, что возвращает Dlg.GetValue(XXX,1).
    <br><br>
</ul>


<h3>17 июня 2008 г.</h3>
<ul>
  <li>Viewer API: добавлены два события <a href="exported_functions/processviewerevent.html#VE_GOTFOCUS">VE_GOTFOCUS</a> и <a href="exported_functions/processviewerevent.html#VE_KILLFOCUS">VE_KILLFOCUS</a>.
    <br><br>
</ul>


<h3>15 мая 2008 г.</h3>
<ul>
  <li>В перечисление <a href="defs/fardialogsettings.html">FarDialogSettings</a> добавлены константы
  FDIS_DELREMOVESBLOCKS и FDIS_MOUSECLICKOUTSIDECLOSESDIALOG, соответствующие настройкам диалогов
  "Del удаляет блоки в строках ввода" и "Клик мыши вне диалога закрывает диалог".
    <br><br>
</ul>

<h3>3 апреля 2008 г.</h3>
<ul>
  <li>Macro: добавлены функции для работы со стековыми закладками <a href="macro/macrocmd/functions.html">BM.XXX()</a>.
    <br><br>
</ul>


<h3>30 марта 2008 г.</h3>
<ul>
  <li>6 новых команд EditorControl для управления позициями навигации ("стековыми закладками") в редакторе:<br>
  <a href="service_functions/editorcontrol.html#ECTL_ADDSTACKBOOKMARK">ECTL_ADDSTACKBOOKMARK</a>,
  <a href="service_functions/editorcontrol.html#ECTL_CLEARSTACKBOOKMARKS">ECTL_CLEARSTACKBOOKMARKS</a> и
  <a href="service_functions/editorcontrol.html#ECTL_DELETESTACKBOOKMARK">ECTL_DELETESTACKBOOKMARK</a>
  - создание и удаление позиций навигации,<br>
  <a href="service_functions/editorcontrol.html#ECTL_GETSTACKBOOKMARKS">ECTL_GETSTACKBOOKMARKS</a>
  - получение информации о позициях навигации,<br>
  <a href="service_functions/editorcontrol.html#ECTL_NEXTSTACKBOOKMARK">ECTL_NEXTSTACKBOOKMARK</a> и
  <a href="service_functions/editorcontrol.html#ECTL_PREVSTACKBOOKMARK">ECTL_PREVSTACKBOOKMARK</a>
  - навигация в редакторе
    <br><br>
</ul>

<h3>29 марта 2008 г.</h3>
<ul>
  <li>новый флаг панели: <a href="structures/panelinfo.html#PFLAGS_PANELLEFT">PFLAGS_PANELLEFT</a>.
    <br><br>
</ul>

<h3>27 марта 2008 г.</h3>
<ul>
  <li>Macro: добавлена макрообласть "Consts" для хранения <a href="macro/macrocmd/consts.html">именованных констант</a>.
    <br><br>
</ul>

<h3>25 марта 2008 г.</h3>
<ul>
  <li>В <a href="defs/farcolors.html">цветовую палитру</a> добавлены цвета для индикаторов длинных строк в меню, списках и комбинированных списках.
    <br><br>

  <li>Macro: Добавлена константа "<a href="macro/macrocmd/states.html#Editor.RealPos">Editor.RealPos</a>" - текущая позиция курсора в строке в редакторе без привязки к размеру табуляции.
    <br><br>

  <li>Macro: Некоторые функции могут иметь опциональные параметры.
    <br><br>

  <li>Macro: Новая функция <a href="macro/macrocmd/functions.html#prompt">prompt</a> - позволяет ввести одну строку текста.
    <br><br>
</ul>

<h3>11 марта 2008 г.</h3>
<ul>
  <li>Macro: Новая функция <a href="macro/macrocmd/functions.html#akey">V=akey(N)</a> - возвращает имя или код клавиши, инициировавшей макрос.
    <br><br>
</ul>


<h3>31 декабря 2007 г.</h3>
<ul>
  <li>API: Новая команда <a href="service_functions/advcontrol.html#ACTL_REDRAWALL">ACTL_REDRAWALL</a> - перерисовка всех окон FAR.
    <br><br>
</ul>

<h3>23 декабря 2007 г.</h3>
<ul>
  <li>Меню плагинов можно вызывать из диалога.
    <br><br>

  <li>Плагин может экспортировать функцию <a href="exported_functions/processdialogevent.html">ProcessDialogEvent</a> для обработки событий, поступающих в диалог.
    <br><br>

</ul>

<h3>14 декабря 2007 г.</h3>
<ul>
  <li>Macro: Добавлена в коллекцию функция <a href="macro/macrocmd/functions.html#replace">Result=replace(Str,Find,Replace,Cnt)</a>.
    <br><br>

  <li>API: Новая команда <a href="structures/actlkeymacro.html#MCMD_GETSTATE">MCMD_GETSTATE</a> для <a href="service_functions/advcontrol.html#ACTL_KEYMACRO">ACTL_KEYMACRO</a>, возвращает статус работы макродвижка.
    <br><br>

  <li>Macro: функция <a href="macro/macrocmd/functions.html#menu.select">Menu.Select</a> теперь с двумя параметрами.
    <br><br>

</ul>

<h3>6 декабря 2007 г.</h3>
<ul>
  <li>2 новых эвента для панельного плагина: <a href="exported_functions/processevent.html#FE_GOTFOCUS">FE_GOTFOCUS</a> и <a href="exported_functions/processevent.html#FE_KILLFOCUS">FE_KILLFOCUS</a>.
    <br><br>

  <li>2 новых эвента для редакторного плагина: <a href="exported_functions/processeditorevent.html#EE_GOTFOCUS">EE_GOTFOCUS</a> и <a href="exported_functions/processeditorevent.html#EE_KILLFOCUS">EE_KILLFOCUS</a>.
    <br><br>

  <li>В диалогах, сразу после <a href="dialogapi/dmsg/dn_initdialog.html">DN_INITDIALOG</a> приходит <a href="dialogapi/dmsg/dn_gotfocus.html">DN_GOTFOCUS</a> для того элемента, который Focus=1.
    <br><br>

</ul>


<h3>4 декабря 2007 г.</h3>
<ul>
  <li>Macro: Добавлена в коллекцию функция <a href="macro/macrocmd/functions.html#mod">n=mod(n1,n2)</a>.
    <br><br>

  <li>Macro: добавлена функция <a href="macro/macrocmd/functions.html#menu.select">N=Menu.Select(S)</a>. Позиционирует на первый пункт, содержащий подстроку S.
    <br><br>

  <li>Новый флаг <a href="dialogapi/flags/dif_noautocomplete.html">DIF_NOAUTOCOMPLETE</a> для строк редактирования - отключает автодополнение.
    <br><br>

</ul>

<h3>12 октября 2007 г.</h3>
<ul>
  <li>Macro: Добавлена константа "<a href="macro/macrocmd/states.html#MacroArea">MacroArea</a>" - возвращает имя текущей макрообласти.
    <br><br>

  <li>Macro: Bof/Eof/Empty/Selected в панелях типа QView/Info/Tree возвращают значения для этих типов панелей. Для обычных панелей возвращают значения из командной строки.
    <br><br>
</ul>

<h3>13 сентября 2007 г.</h3>
<ul>
  <li>Теперь при открытом DI_COMBOBOX в диалоговую процедуру посылаются
    события DN_KEY или DN_MOUSEEVENT. Управлять этим поведением можно с помощью
    сообщений <a href="dialogapi/dmsg/dm_setcomboboxevent.html">DM_SETCOMBOBOXEVENT</a> и <a href="dialogapi/dmsg/dm_getcomboboxevent.html">DM_GETCOMBOBOXEVENT</a>.
    <br><br>
</ul>


<h3>30 августа 2007 г.</h3>
<ul>
  <li>Bug: Macro: Если пункт меню не содержит горячую клавишу, то <a href="macro/macrocmd/functions.html">GetHotkey()</a> возвращает "0" вместо ""
    <br><br>

  <li>Macro: Добавлена команда <a href="macro/macrocmd/selword.html">$SelWord</a> - выделяет слово.
    <br><br>

  <li>Bug: Macro: В панелях быстрого просмотра и информации не работали некоторые переменные: ItemCount, CurPos, Selected, Bof, Eof всегда 0; Empty всегда 1.
    <br><br>

</ul>

<h3>7 августа 2007 г.</h3>
<ul>
  <li>Bug: Если плагин для списка отключал реакцию слежения за курсором мыши
    (<a href="dialogapi/dmsg/dm_listsetmousereaction.html#LMRT_NEVER">LMRT_NEVER</a>), то в диалоговую процедуру не приходило событие DN_MOUSECLICK
    для двойного клика мыши (Mantis#0000309)
    <br><br>

  <li>В структуре <a href="structures/pluginpanelitem.html">PluginPanelItem</a> вместо <a href="winapi/win32_find_data.html">WIN32_FIND_DATA</a> используется
    структура <a href="defs/far_find_data.html">FAR_FIND_DATA</a>. Вместо макроса _FAR_USE_FARFINDDATA необходимо
    использовать <a href="defs/_far_use_win32_find_data.html">_FAR_USE_WIN32_FIND_DATA</a>.
    <br><br>

</ul>

<h3>23 июля 2007 г.</h3>
<ul>
  <li>Добавлены команды <a href="dialogapi/dmsg/dm_geteditposition.html">DM_GETEDITPOSITION</a> и <a href="dialogapi/dmsg/dm_seteditposition.html">DM_SETEDITPOSITION</a> - управление позицией строки в строках ввода в диалогах.
    <br><br>

</ul>

<h3>5 июля 2007 г.</h3>
<ul>
  <li>Macro: добавлена функция <a href="macro/macrocmd/functions.html#gethotkey">gethotkey</a>.
    <br><br>

  <li>Macro: Не воспринимались переменные начинающиеся с цифр (например, %3DO).
    <br><br>

  <li>Bug: <a href="dialogapi/dmsg/dm_listgetcurpos.html">DM_LISTGETCURPOS</a> возвращал неправильное значение после открытия ComboBox`а, навигации по списку с последующим отказом от выбора (нажали Esc).
    <br><br>

</ul>

<h3>31 мая 2007 г.</h3>
<ul>
  <li>Macro: добавлена функция <a href="macro/macrocmd/functions.html#panel.setposidx">Panel.SetPosIdx</a> - позиционирование на файловой панели по индексу.
    <br><br>

</ul>

<h3>10 мая 2007 г.</h3>
<ul>
  <li>Macro: новые функции <a href="macro/macrocmd/functions.html#asc">asc()</a> и
     <a href="macro/macrocmd/functions.html#chr">chr</a>.
    <br><br>

</ul>

<h3>23 марта 2007 г.</h3>
<ul>
  <li>Макросы в реестре могут иметь тип REG_MULTI_SZ.
    <br><br>
  <li>Добавлен флаг <a href="structures/actlkeymacro.html#KSFLAGS_REG_MULTI_SZ">KSFLAGS_REG_MULTI_SZ</a>.
    <br><br>

</ul>

<h3>14 марта 2007 г.</h3>
<ul>
  <li>После вызова <a href="service_functions/editorcontrol.html#ECTL_SELECT">EditorControl(ECTL_SELECT)</a> с установленным значением
      поля <a href="structures/editorselect.html">BlockStartLine</a> = -1, последующий вызов
      <a href="service_functions/editorcontrol.html#ECTL_GETINFO">ECTL_GETINFO</a> так же возвращал -1 в поле <a href="structures/editorinfo.html">BlockStartLine</a>.
    <br><br>

</ul>



<h3>13 марта 2007 г.</h3>
<ul>
  <li>Macro: новые функции <a href="macro/macrocmd/functions.html#waitkey">waitkey()</a> и
     <a href="macro/macrocmd/functions.html#eval">eval</a>.
    <br><br>

</ul>

<h3>20 февраля 2007 г.</h3>
<ul>
  <li>Добавлен флаг <a href="dialogapi/flags/dif_notcvtusercontrol.html">DIF_NOTCVTUSERCONTROL</a> для <a href="dialogapi/controls/di_usercontrol.html">DI_USERCONTROL</a>.
    <br><br>

</ul>


<h3>7 февраля 2007 г.</h3>
<ul>
  <li>Macro: новые слова <a href="macro/macrocmd/states.html#APanel.ColumnCount">APanel.ColumnCount</a> и
     <a href="macro/macrocmd/states.html#PPanel.ColumnCount">PPanel.ColumnCount</a>.
    <br><br>

</ul>

<h3>30 января 2007 г.</h3>
<ul>
  <li>Новая команда: <a href="service_functions/control.html#FCTL_GETUSERSCREEN">FCTL_GETUSERSCREEN</a>.
  <br><br>
</ul>

<h3>25 января 2007 г.</h3>
<ul>
  <li>Для элемента <a href="dialogapi/controls/di_vtext.html">DI_VTEXT</a> добавлена обработка флагов: DIF_CENTERGROUP, DIF_SEPARATOR, DIF_SEPARATOR2, DIF_SHOWAMPERSAND.
    <br><br>

  <li>В обработчике <a href="dialogapi/defdlgproc.html">DefDlgProc</a> для события <a href="dialogapi/dmsg/dn_btnclick.html">DN_BTNCLICK</a> не учитывался флаг <a href="dialogapi/flags/dif_btnnoclose.html">DIF_BTNNOCLOSE</a>.
    <br><br>

  <li>Некорректная отрисовка элемента <a href="dialogapi/controls/di_text.html">DI_TEXT</a> для сочетания условий: DIF_CENTERTEXT + DIF_SEPARATOR + X1 не равен "-1"
    <br><br>

</ul>


<h3>24 января 2007 г.</h3>
<ul>
  <li>Ужесточение правил, касаемых координат X2 и Y2 в элементах диалогов. Y2 указывать всегда, а не 0.
    <br><br>

</ul>

<h3>18 января 2007 г.</h3>
<ul>
  <li>Не посылался <a href="exported_functions/processeditorevent.html#EE_CLOSE">EE_CLOSE</a> для "?New File?".
    <br><br>

  <li>Неправильная цветовая отрисовка диалога сообщения при использование флага FMSG_WARNING в функции <a href="service_functions/message.html">Messag</a> без кнопок.
    <br><br>
</ul>

<h3>27 декабря 2006 г.</h3>
<ul>
  <li>Macro: новые слова <a href="macro/macrocmd/states.html#Help.FileName">Help.FileName</a>,
     <a href="macro/macrocmd/states.html#Help.Topic">Help.Topic</a> и
     <a href="macro/macrocmd/states.html#Help.SelTopic">Help.SelTopic</a>.
    <br><br>

  <li>Для окна помощи команда <a href="service_functions/advcontrol.html#ACTL_GETWINDOWINFO">ACTL_GETWINDOWINFO</a> теперь
      заполняет поле Name - содержит полный путь к просматриваемому HLF-файлу.
    <br><br>
</ul>

<h3>01 декабря 2006 г.</h3>
<ul>
  <li>Viewer API: Член структуры <a href="structures/viewermode.html">ViewerMode</a>.TypeWrap переименован в ViewerMode.WordWrap
    <br><br>

  <li>Viewer API: Добавлена команда <a href="service_functions/viewercontrol.html#VCTL_SETMODE">VCTL_SETMODE</a>, позволяющая менять режимы программы просмотра.
    <br><br>
</ul>


<h3>23 ноября 2006 г.</h3>
<ul>
  <li>Macro: <a href="macro/macrocmd/akey.html">$AKey</a> - вставить во входной буфер код клавиши, вызвавшей макрос.
    <br><br>
</ul>


<h3>21 ноября 2006 г.</h3>
<ul>
  <li>Приведение АПИ к 64bit совместимости:
     <ul>
     <li>DlgProc: long Param2 -> LONG_PTR Param2 и возвращает LONG_PTR вместо long
     <li>SendDlgMessage: long Param2 -> LONG_PTR Param2 и возвращает LONG_PTR вместо long
     <li>DefDlgProc: long Param2 -> LONG_PTR Param2 и возвращает LONG_PTR вместо long
     <li>DialogEx: long Param -> LONG_PTR Param
     <li>FarMenuItemEx: DWORD UserData -> DWORD_PTR UserData
     <li>PluginPanelItem: DWORD UserData -> DWORD_PTR UserData
     <li>AdvControl: возвращает INT_PTR вместо int
     <li>OpenPlugin: int Item -> INT_PTR Item
     </ul>
    <br><br>
</ul>



<h3>20 сентября 2006 г.</h3>
<ul>
  <li>Macro: <a href="macro/macrocmd/functions.html#fexist">fexist()</a> понимает символы маски '*' и '?'
    <br><br>

  <li>Macro: Если имя содержит символы '*' и '?', то <a href="macro/macrocmd/functions.html#fattr">fattr()</a> возвращает атрибуты для первого найденного файлового объекта.
    <br><br>

  <li>Macro: fexist() и fattr() теперь не работают с панелями, для работы с панелями добавлены новые функции <a href="macro/macrocmd/functions.html#panel.fexist">panel.fexist()</a> и <a href="macro/macrocmd/functions.html#panel.fattr">panel.fattr()</a>.
    <br><br>

</ul>

<h3>25 августа 2006 г.</h3>
<ul>
  <li>Скорректировано описание работы события <a href="dialogapi/dmsg/dn_btnclick.html">DN_BTNCLICK</a> для <a href="dialogapi/controls/di_radiobutton.html">DI_RADIOBUTTON</a>.
    <br><br>
</ul>


<h3>29 июля 2006 г.</h3>
<ul>
  <li>Добавлена функция <a href="fsf/snprintf.html">FSF.snprintf</a> - осуществляет форматированный вывод в строку с заданным размером.
    <br><br>
</ul>

<h3>20 июня 2006 г.</h3>
<ul>
  <li>Статья Ивана Синтюрина - "<a href="articles/temppanel.html">Работа с &quot;временной панелью&quot; в своем плагине</a>"
    <br><br>
  <li>Статья от Gigabyte - "<a href="articles/delphisimple.html">Написание плагина на Delphi (ID3 Viewer)</a>"
    <br><br>
</ul>

<h3>05 апреля 2006 г.</h3>
<ul>
<li>Macro: Новая функция "<a href="macro/macrocmd/functions.html#sleep">N=sleep(N)</a>". Организация задержки в макросе.
    <br><br>

<li>Macro: Константа "<a href="macro/macrocmd/states.html#Far.Height">Far.Height</a>" - высота консольного окна FAR в строках.
    <br><br>

<li>Macro: Константа "<a href="macro/macrocmd/states.html#Far.Title">Far.Title</a>" - текущий заголовок консольного окна FAR (без суффикса " - Far").
    <br><br>

<li>Macro: Константа "<a href="macro/macrocmd/states.html#Title">Title</a>" - заголовок текущего объекта.
    <br><br>

<li>Macro: Константа "<a href="macro/macrocmd/states.html#Drv.ShowPos">Drv.ShowPos</a>" - для левой (1) или правой (2) панели вызвано меню выбора дисков.
    <br><br>

<li>Macro: Константа "<a href="macro/macrocmd/states.html#Drv.ShowMode">Drv.ShowMode</a>" - флаги отображения меню выбора дисков.
    <br><br>

</ul>

<a href="history.html">long History</a>,
<a href="historyapi.html">история API</a>

</body>
</html>
