<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>GetFilesW</title>
<meta http-equiv="Content-Type" Content="text/html; charset=Windows-1251">
<link rel="stylesheet" type="text/css" href="../../styles/styles.css">
<script language="javascript" src='../links.js' type="text/javascript"></script>
</head>
<body>

<h1>GetFilesW</h1>
<div class=navbar>
<a href="../index.html">главная</a> |
<a href="index.html">экспортируемые функции</a>
</div>

<div class=shortdescr>
Функция <dfn>GetFilesW</dfn> вызывает для получения файлов из эмулируемой файловой системы<br>
(<em>FAR Manager плагину: "хочу этот/эти файл(ы) с твоей панели, место назначения указано"</em>).
</div>

<pre class=syntax>
int WINAPI GetFilesW(
  HANDLE hPlugin,
  struct PluginPanelItem *PanelItem,
  int ItemsNumber,
  int Move,
  const wchar_t **DestPath,
  int OpMode
);
</pre>
<h3>Параметры</h3>
<div class=descr>

    <div class=dfn>hPlugin</div>
    <div class=dfndescr>Описатель плагина, возвращается функциями <a href="openpluginw.html">OpenPluginW</a> или <a href="openfilepluginw.html">OpenFilePluginW</a>.</div>
    <div class=dfn>PanelItem</div>
    <div class=dfndescr>Указывает на массив структур <a href="../structures/pluginpanelitem.html">PluginPanelItem</a>.
      Каждая структура описывает файл, получаемый из эмулируемой файловой системы.</div>
    <div class=dfn>ItemsNumber</div>
    <div class=dfndescr>Количество структур PluginPanelItem в массиве <i>PanelItem</i>.</div>
    <div class=dfn>Move</div>
    <div class=dfndescr>Если 0, файл должен быть скопирован, иначе - перемещен.</div>
    <div class=dfn>DestPath</div>
    <div class=dfndescr>Указатель на путь назначения (куда получим файлы). Если флаг
     <dfn>OPM_SILENT</dfn> параметра <a href="../defs/operation_mode.html"><i>OpMode</i></a> не установлен, вы можете позволить пользователю изменить его, 
	но в этом случае <i>DestPath</i> должен указывать на буфер плагина, содержащий новый путь. Буфер должны быть валиден после возвращения из функции.</div>
    <div class=dfn>OpMode</div>
    <div class=dfndescr>Комбинация флагов <a href="../defs/operation_mode.html">operation mode</a>.
      Эта функция должна быть готова обработать флаги
      OPM_SILENT, OPM_FIND, OPM_VIEW, OPM_QUICKVIEW и OPM_EDIT. Также она может
      обрабатывать OPM_DESCR и OPM_TOPLEVEL для увеличения
      скорости, если это необходимо.</div>

</div>

<h3>Возвращаемое значение</h3>
<div class=descr>
  В случае успеха возвращаемое значение должно
  быть равно 1. В случае провала возвращается 0. Если
  функция была прервана пользователем, то должно
  возвращаться -1.
</div>

<h3>Замечания</h3>
<div class=descr>
<ol>
<li>Плагин должен сам обрабатывать "свои" папки.
<li>Если операция не удалась, но часть файлов была
  успешно обработана, плагин может снять выделение
  только с обработанных файлов. Чтобы сделать это,
  он должен очистить флаг <a href="../structures/pluginpanelitem.html#PPIF_SELECTED">PPIF_SELECTED</a>
  в обработанных элементах в переданном функции списке структур
  <var>PluginPanelItem</var>.
<li>Данная функция вызывается только для плагинов, реализующих виртуальные файловые системы.
Для этого необходимо при вызове <a href="getopenplugininfow.html">GetOpenPluginInfoW</a>
снять флаг <a href="../structures/openplugininfo.html#OPIF_REALNAMES">OPIF_REALNAMES</a>,
иначе данная функция никогда не будет вызвана.
</ol>
</div>

<div class=see>Смотрите также:</div><div class=seecont>
<a href="putfilesw.html">PutFilesW</a>,
<a href="../service_functions/getdirlist.html">GetDirList</a>,
<a href="../service_functions/getplugindirlist.html">GetPluginDirList</a>
</div>

</body>
</html>