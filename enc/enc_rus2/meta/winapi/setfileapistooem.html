<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>SetFileApisToOEM</title>
<meta http-equiv="Content-Type" Content="text/html; charset=Windows-1251">
<link rel="stylesheet" type="text/css" href="../../styles/styles.css">
<script language="javascript" src='../links.js' type="text/javascript"></script>
</head>

<body>

<h1>SetFileApisToOEM</h1>
<div class=navbar>
<a href="../index.html">главная</a> |
<a href="../structures/index.html">структуры</a> |
<a href="index.html">win32 структуры</a>
</div>

<div class=smalldescr>
Функция <strong>SetFileApisToOEM</strong>
указывает набору файловых функций Windows API использовать кодировку OEM.
Эта функция полезна для 8-битных консольных операций ввода-вывода.
</div>

<pre class=syntax>
VOID SetFileApisToOEM(VOID);</pre>

<h3>Параметры</h3>
<div class=descr>
  Отсутствуют.
</div>

<h3>Возвращаемое значение</h3>
<div class=descr>
  Нет.
</div>

<h3>Замечания</h3>
<div class=descr>
<p>Функция <strong>SetFileApisToOEM</strong>
дополняет функцию <a href="setfileapistoansi.html">SetFileApisToANSI</a>,
которая указывает набору файловых функций Windows API использовать кодовую
страницу с кодировкой ANSI.</p>
<p>8-битные консольные функции используют по умолчанию кодировку OEM.
Все остальные функции должны использовать кодовую страницу ANSI по умолчанию.
Это означает, что строки, возвращаемые
консольными функциями могут быть не корректно обработаны другими функциями,
и наоборот. К примеру Если функция <strong>FindFirstFileA</strong> возвращает строку, содержащую
некоторые расширенные символы ANSI, и при этом 8-битные функции установлены
для использования кодировки OEM, то функция <strong>WriteConsoleA</strong> не отобразит
строку корректно.</p>

<p>Используйте <strong>AreFileApisANSI</strong> для обнаружения в какой кодовой странице
набор файловых функций работает в данный момент. Используйте <strong>SetConsoleCP</strong> и <strong>SetConsoleOutputCP</strong> для установки кодовой страницы для 8-битных
консольных функций.</p>

<p>Для разрешения проблемы несовместимости кодовых страниц лучше всего использовать
кодировку Unicode. В этом случае приложение
будет более гибким. Другой способ &mdash; использовать функцию <strong>SetFileApisToOEM</strong> для указания множеству файловых
функций Windows API использовать кодировку OEM. Используйте функцию <strong>SetFileApisToANSI</strong> для установки кодовой страницы обратно в ANSI.</p>

<p>Функции <strong>SetFileApisToANSI</strong> и <strong>SetFileApisToOEM</strong> действуют на следующее
множество Windows API функций: </p>

<table class="cont">
<tr class="cont">
  <th class="cont" width="40%">Функция</th>
  <th class="cont" width="60%">Описание</th></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/_lopen">_lopen</a></td>
<td class="cont" width="60%">открыть существующий файл</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/CopyFile">CopyFile</a></td>
<td class="cont" width="60%">копировать файл</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/CreateDirectory">CreateDirectory</a></td>
<td class="cont" width="60%">создать каталог</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/CreateFile">CreateFile</a></td>
<td class="cont" width="60%">создать/открыть объект (файл, канал, ...)</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/CreateProcess">CreateProcess</a></td>
<td class="cont" width="60%">создать новый процесс</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/DeleteFile">DeleteFile</a></td>
<td class="cont" width="60%">удалить файл</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/FindFirstFile">FindFirstFile</a></td>
<td class="cont" width="60%">начать поиск файловых объектов</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/FindNextFile">FindNextFile</a></td>
<td class="cont" width="60%">продолжить поиск файловых объектов</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/GetCurrentDirectory">GetCurrentDirectory</a></td>
<td class="cont" width="60%">получить текущий каталог</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/GetDiskFreeSpace">GetDiskFreeSpace</a></td>
<td class="cont" width="60%">получить информацию о диске</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/GetDriveType">GetDriveType</a></td>
<td class="cont" width="60%">получить типа диска</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/GetFileAttributes">GetFileAttributes</a></td>
<td class="cont" width="60%">получить файловые атрибуты</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/GetFullPathName">GetFullPathName</a></td>
<td class="cont" width="60%">получить полный путь</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/GetModuleFileName">GetModuleFileName</a></td>
<td class="cont" width="60%">извлекает полный путь для указанного модуля.</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/GetModuleHandle">GetModuleHandle</a></td>
<td class="cont" width="60%">получить хендл запущенного модуля</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/GetSystemDirectory">GetSystemDirectory</a></td>
<td class="cont" width="60%">возвращает путь к системного каталогу</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/GetTempFileName">GetTempFileName</a></td>
<td class="cont" width="60%">создает имя для временного файла</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/GetTempPath">GetTempPath</a></td>
<td class="cont" width="60%">возвращает путь к %TEMP% каталогу</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/GetVolumeInformation">GetVolumeInformation</a></td>
<td class="cont" width="60%">возвращает информацию о файловой системе</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/GetWindowsDirectory">GetWindowsDirectory</a></td>
<td class="cont" width="60%">возвращает путь к каталогу Windows</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/LoadLibrary">LoadLibrary</a></td>
<td class="cont" width="60%">загрузить исполняемый модуль</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/LoadLibraryEx">LoadLibraryEx</a></td>
<td class="cont" width="60%">загрузить исполняемый модуль</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/MoveFile">MoveFile</a></td>
<td class="cont" width="60%">переименовать файл/каталог</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/MoveFileEx">MoveFileEx</a></td>
<td class="cont" width="60%">переименовать файл/каталог</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/OpenFile">OpenFile</a></td>
<td class="cont" width="60%">создать/открыть/удалить файл</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/RemoveDirectory">RemoveDirectory</a></td>
<td class="cont" width="60%">удалить каталог</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/SearchPath">SearchPath</a></td>
<td class="cont" width="60%">поиск файла</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/SetCurrentDirectory">SetCurrentDirectory</a></td>
<td class="cont" width="60%">установить текущий каталог</td></tr>
<tr class="cont"><td class="cont" width="40%"><a href="win32/SetFileAttributes">SetFileAttributes</a></td>
<td class="cont" width="60%">установить файловые атрибуты</td></tr>
</table>

<p>При работе с командной строкой консольное приложение может получить
командную строку в Unicode и потом конвертировать ее в OEM,
используя соответствующие функции. Заметьте также, что
функция <strong>argv</strong> использует кодовую страницу ANSI.</p>

</div>

<div class=see>Смотрите также:</div><div class=seecont>
<a href="setfileapistoansi.html">SetFileApisToANSI</a>
</div>

</body>
</html>