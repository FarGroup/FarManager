drkns 11.09.2016 02:47:09 +0200

1. CPP_UNALIGN больше нет - выравниваем вручную только там, где надо.

w17 10.09.2016 23:42:40 +0300

1. CPP_UNALIGN влияет на все платформы при сборке vc

drkns 19.12.2015 13:23:26 +0200

1. NEEDENTRY -> !NOENTRY
   NEEDDEFLIB -> !NODEFLIB
   EXCLUDECRT -> !INCLUDECRT

w17 05.10.2013 11:57:54 +0400

1. makefile_all_vc clean: fix (from CyberShadow)

svs 15.04.2013 16:34:23 +0400

1. Добавлен USERLIBS для VC

yjh 20.12.2012 18:59:52 +0400

1. Случай сборки без def-file при использовании ulink

yjh 20.12.2012 18:28:04 +0400

1. Коррекция makefile_target_inc для режима borland's make
2. Коррекция common\vc10_wrapper_u.cpp для использования стандартных vc-include

drkns 15.12.2012 23:45:12 +0200

1. Редизайн использования vc10-враппера. Теперь всё лежит в одном месте и подхватывается автоматически при необходимости.

w17 27.10.2012 20:44:26 +0400

1. avoid far and standard runtime mixt

w17 22.10.2012 19:42:22 +0400

1. vc build fix

w17 13.10.2012 23:05:52 +0400

1. luamacro added to gcc build + vstudio build + many small build corrections.

yjh 04.10.2012 03:45:21 +0400

1. Устранение последствий "рефакторинга" vc-makes.

drkns 30.09.2012 15:23:09 +0200

1. Немного порефакторим vc-мейки.

zg 16.09.2012 15:08:24 +0200 

1. убран macroview из сборки.

w17 12.04.2012 20:25:30 +0400

1. CP_AUTODETECT -> CP_DEFAULT

w17 23.02.2012 00:49:24 +0400

1. снова mingw gcc сборка

t-rex 26.12.2011 19:35:10 +0200

1. use correct def for GCC x64

t-rex 25.12.2011 22:06:45 +0200

1. asm compilation for VC.

t-rex 21.12.2011 18:24:45 +0200

1. NO_RELEASE_PDB для VC сборки (для нужд Nightly).

w17 18.11.2011 19:21:54 +0400

1. продолжение сборки через mingw gcc 4.6.1 - tdm64

w17 17.11.2011 02:55:35 +0400

1. продолжение сборки через mingw gcc 4.6.1

w17 16.11.2011 13:50:50 +0400

1. сборка плагинов через mingw gcc 4.6.1 (кроме macroview)

t-rex 11.02.2011 13:34:31 +0200

1. Сборка и использование pluginreg.

t-rex 06.02.2011 01:08:10 +0200

1. По умолчанию всё собирается в юникоде кроме ftp и ma.
   Флага WIDE больше нет, есть флаг ANSI.

t-rex 06.02.2011 00:18:17 +0200

1. 1.7 больше нет, избавляемся от convert.exe.

drkns 26.11.2010 13:05:31 +0200

1. Автоопределение версии visual c++.

yjh 25.11.2010 08:59:04 +0300

1. Подготовка к partial delayload при компоновке ulink'ом 
   (см. описание 1727 в unicode_far)

drkns 24.11.2010 11:04:49 +0200

1. "Безопасный" вариант ARRAYSIZE().

drkns 06.10.2010 19:59:59 +0200

1. ASLR.

drkns 26.08.2010 15:43:21 +0200

1. Автоопределение целевой платформы для vc-мейков.

drkns 11.02.2010 20:35:04 +0200

1. Проекты для VS2010.

chupakabra 29.07.2009 20:27:00 +0200

1. Собираем отладочную версию с ключем /debug, чтобы компоновщик создавал приватные символы.

drkns 08.04.2009 19:58:55 +0200

1. common\convert.exe используется и в проектах.

t-rex 08.04.2009 02:10:09 +0200

1. common\convert.exe юзается для "обработки" $(DOCS) для юникод сборки.
   Он конвертит что надо в utf8 и ставит правильные пути реестра где надо.

yjh 13.01.2009 06:02:30 +0300

1. Правка предыдущей правки :) т.е. копирования DOCS для borland's make

t-rex 12.01.2009 16:08:45 +0200

1. Сделаем для VC чтоб как и для GCC можно было в DOCS задать те доп. файлы что надо скопировать в OUTDIR.

t-rex 11.01.2009 15:34:26 +0200

1. для gcc, путь к COMMON можно предопределять извне.

t-rex 23.12.2008 17:20:29 +0200

1. Более правильное создание папок в vc мэйках, нужно как минимум для nightly.

t-rex 05.12.2008 21:31:41 +0200

1. Добавил для VC - /D_CRT_NONSTDC_NO_WARNINGS

2. для VC, путь к COMMON можно предопределять извне.

t-rex 02.12.2008 13:41:42 +0200

1. Дабавим в GCC мэйки поддержку
NEEDENTRY - set if you want to disable the -nostartfiles link flag
NEEDDEFLIB - set if you want to disable the -nodefaultlibs link flag
EXCLUDECRT - set if you do not want to link with common/crt lib.
USERRC - user defined switches for windres
DISABLEAUTODEPS

t-rex 02.12.2008 13:04:59 +0200

1. VC9 дефолтный компилятор, надо выставить VC8 чтоб собирать с VC8 (и за одно исправлена VC8 сборка).

Zuz 30.10.2008 21:38:35 +0500 - build 

1. Необольшая неточность в обработке NEEDDEFLIB в makefile_vc_def_inc для случая
   использования ulink. Ранее оно обрабатывалось только если NEEDENTRY не была
   определена.
2. Поддержка многоядерной компиляции (необходимо определять MP=/MP2, например,
   для 2х ядер).

drkns 06.10.2008 00:05:30 +0200

1. Ветки для IA64 в *.vcproj. Работоспособность не проверялась.

2. Убраны упоминания _FAR_USE_FARFINDDATA.

Zuz 28.09.2008 14:14:10 +0500

1. Первые шаги в сторону IA64
2. proclist пока нормально работает только при
   HKEY_CURRENT_USER\Software\Far18\System\IgnoreDataAlignmentFaults=1

t-rex 14.06.2008 15:28:46 +0200

1. GCC мэйки теперь тоже умееют WIDE

yjh 09.06.2008 06:37:40 +0300

1. Адаптация makesystem для сборки vc9 (VS2008) - пока не по умолчанию. 
   Помимо изменения путей в make_vc_defs следует добавить VC9=1.
   После того как все садаптируются :) сделаем дефолтным

t-rex 08.06.2008 14:57:17 +0200

1. Теперь farversion.hpp получает версию фара автоматом из plugin.hpp. Добавил в мэйки новую зависимость для *.rc.

yjh 08.06.2008 03:09:22 +0300

1. Для того что бы избавиться от диагностик при переопределении OBJDIR (для 
   всяких внутренних библиотек) в make_file_vc... добавлена пара определений:
   CFLAGS_NO и CPP_PROJ_NO - всё то же самое, но без ключа /Fo

yjh 08.06.2008 02:03:56 +0300

1. Включаем ftp в общую сборку (makefile_all_vc) и убираем там ветку
   "непортированного в win64" - не осталось благо такого :)

yjh 08.06.2008 01:26:26 +0300

1. При использовании makefile_all_vc сборка библиотек для 64бит не 
   происходила :)

yjh 07.06.2008 22:39:33 +0300

1. В makefile_vc_... добавлена возможность переопределения имён/путей
   (но не расширений!) rc/def-файлов. Полезно для сборки субплагинов

yjh 07.06.2008 20:45:38 +0300

1. В makefile_vc_... добавлена возможность описывать дополнительные
   зависимости для компоновки (например, "внутренние" библиотеки плагина)
   LINK_DEP.

drkns 06.06.2008 11:04:18 +0200

1. Проекты для VS2008.

t-rex 20.04.2008 00:37:13 +0200

1. В makefile_vc_def_inc, CPP_UNALIGN использовался для x64 вместо x86
   и соответственно MA x64 падал а в x86 могли быть проблемы. 

yjh 12.11.2007 05:14:28 +0300


1. makefile_all_vc теперь поддерживает параметр INSTALL. Если он определён,
   то он задаёт путь куда складываются все бинарники плагинов (каждый
   в свою поддиректорию, естественно). Разделение на 32/32W/64/64W так же
   поддерживается

2. В makefile_vc_defs можно задать DEFINSTALL - тогда при запуске 
   makefile_all_vc без параметра INSTALL будет использовано это значение
   Отдельное имя сделано для того, что бы определение в makefile_vc_defs
   не влияло на "отдельные" сборки плагинов

3. В makefile_all_vc временно добавлены ветки для WIDE и AMD64 - не все плугины
   пока портированы :)

4. В makefile_vc_def_inc добавлена опция отключающая C-выравнивание в 32х
   битах (убираем диагностику при сборке multiarc)


5. Вместо CPU=AMD64 теперь можно писать /DAMD64 (для make) или AMD64=1.
   Старый синтаксис так же допустим


t-rex 11.11.2007 22:53:20 +0200

1. Добавлен (в корневом каталоге плугинов) makefile_all_gcc - он позволяет
   собрать все "тривиальные" плугины одной командой.
   В список, на данный момент, не включены:
   emenu,ftp,newarc - нет стандартного makefile_gcc

t-rex 11.11.2007 22:03:49 +0200

1. Для GCC добавил настройки для C (gcc), оно надо в MA для libpcre.

yjh 11.11.2007 21:34:27 +0300

1. Убрана принудительная компоновка с libcmt в 32хбитах. Там где она
   нужна следует устанавливать NEEDDEFLIB.

2. Корректная обработка NEEDDEFLIB при компоновке ulink'ом


yjh 11.11.2007 17:26:05 +0300

1. Ошибка при использовании стандартного borland make (include)

2. Добавлен файл makefile_vc_getmode для упрощения обработки subplugins

3. multiarc включен в список makefile_all_vc

4. Добавлена поддержка сборки библиотеки (CRT) при использовании make

5. При работе с makefile_all_vc сначала собирается CRT а потом всё остальное


yjh 11.11.2007 15:49:14 +0300

1. makefile_vc (и его include's) теперь могут обрабатываться как nmake (ms),
   так и make от borland

2. Если в каталоге plugins будет находиться makefile_vc_defs (его присутсвие
   НЕ обязательно), то он автоматически покдлючается и позволяет задавать
   "стандартные" режимы и пути. Это позволяет (помимо прочего) не переключать
   environment при сборке 32/64битовых версий.
   Этот файл НЕ включается в репозиторий (он у каждого свой), а пример такого
   файла (используемый мной) ниже

3. Добавлен (в корневом каталоге плугинов) makefile_vc_all - он позволяет
   собрать все "тривиальные" плугины одной командой.
   В список, на данный момент, не включены:
     ftp,helloworld,newarc  - нет стандартного makefile_vc
     multiarc - не общего makefile_vc собирающего и библиотеки с "подплугинами"

4. Добавлен changelog :)

5. Пример файла makefile_vc_defs
---cut---
!ifndef NO_ULINK
ULINK=1
!endif

####################################################################
INCLUDE=""
LIB=""

_ULINK_PATH_=E:\TOOLSES\  # don't remove comment char

ENV_INC_OPT=/IJ:\_MS\SDK\include /IE:\VC8\VC\INCLUDE

!if "$(CPU)" == "AMD64"
!ifndef ULINK
ENV_LIB_OPT=/LIBPATH:J:\_MS\SDK\lib\x64 /LIBPATH:E:\VC8\VC\LIB\amd64
!else
ENV_LIB_OPT=/LJ:\_MS\SDK\lib\x64;E:\VC8\VC\LIB\amd64
!endif
_BIN_PATH_=E:\VC8\VC\bin\x86_amd64\ # don't remove comment char
!else
!ifndef ULINK
ENV_LIB_OPT=/LIBPATH:J:\_MS\SDK\lib /LIBPATH:E:\VC8\VC\LIB
!else
ENV_LIB_OPT=/LJ:\_MS\SDK\lib;E:\VC8\VC\LIB
!endif
_BIN_PATH_=E:\VC8\VC\bin\  # don't remove comment char
!endif

######################################################################
---end---
